# ==============================================================================
# POLYMARKET COPY TRADING BOT - CONFIGURATION
# ==============================================================================

# ------------------------------------------------------------------------------
# TRADERS TO COPY (Multiple addresses supported)
# ------------------------------------------------------------------------------
# Option 1: Single trader
# USER_ADDRESSES = '0xd62531bc536bff72394fc5ef715525575787e809'

# Option 2: Multiple traders (comma-separated)
# USER_ADDRESSES = '0xTrader1..., 0xTrader2..., 0xTrader3...'

# Option 3: Multiple traders (JSON array format)
# USER_ADDRESSES = '["0xTrader1...", "0xTrader2...", "0xTrader3..."]'

USER_ADDRESSES = ''

# ------------------------------------------------------------------------------
# YOUR WALLET CONFIGURATION
# ------------------------------------------------------------------------------
# Your Polygon wallet address (must match PRIVATE_KEY)
PROXY_WALLET = ''

# Your wallet's private key (WITHOUT 0x prefix)
# ‚ö†Ô∏è  NEVER share this key or commit it to git!
PRIVATE_KEY = 'your_private_key_here_without_0x_prefix'

# ------------------------------------------------------------------------------
# POLYMARKET API ENDPOINTS
# ------------------------------------------------------------------------------
CLOB_HTTP_URL = 'https://clob.polymarket.com/'
CLOB_WS_URL = 'wss://ws-subscriptions-clob.polymarket.com/ws'

# ------------------------------------------------------------------------------
# BOT SETTINGS
# ------------------------------------------------------------------------------
# How often to check for new trades (in seconds)
FETCH_INTERVAL = 1

# Ignore trades older than X hours (renamed from TOO_OLD_TIMESTAMP)
TOO_OLD_TIMESTAMP_HOURS = 1

# Maximum retry attempts for failed orders
RETRY_LIMIT = 3

# Network request timeout in milliseconds (default: 10000 = 10 seconds)
# Increase if you experience frequent timeout errors
REQUEST_TIMEOUT_MS = 10000

# Maximum retry attempts for network errors (default: 3)
# Helps handle temporary connection issues to Polymarket API
NETWORK_RETRY_LIMIT = 3

# ==============================================================================
# COPY STRATEGY CONFIGURATION (NEW SYSTEM!)
# ==============================================================================
# Choose your copy strategy: PERCENTAGE, FIXED, or ADAPTIVE
# - PERCENTAGE: Copy a fixed % of trader's order (recommended for beginners)
# - FIXED: Copy a fixed dollar amount per trade (predictable spending)
# - ADAPTIVE: Dynamically adjust % based on trade size (advanced)
COPY_STRATEGY = 'PERCENTAGE'

# Main parameter - meaning depends on strategy:
# - PERCENTAGE: Percentage of trader's order (e.g., 10.0 = 10%)
# - FIXED: Fixed dollar amount per trade (e.g., 50.0 = $50)
# - ADAPTIVE: Base percentage for adaptive scaling (e.g., 10.0 = 10%)
COPY_SIZE = 10.0

# ------------------------------------------------------------------------------
# SAFETY LIMITS (Protect your account!)
# ------------------------------------------------------------------------------
# Maximum size for a single order in USD (default: 100.0)
# This prevents oversized trades even if trader makes huge orders
MAX_ORDER_SIZE_USD = 100.0

# Minimum size for a single order in USD (default: 1.0)
# Orders below this will be skipped (Polymarket requirement)
MIN_ORDER_SIZE_USD = 1.0

# Optional: Maximum total position size in USD (per market)
# Prevents accumulating too large position in one market
# MAX_POSITION_SIZE_USD = 500.0

# Optional: Maximum total trading volume per day in USD
# Prevents overtrading in a single day
# MAX_DAILY_VOLUME_USD = 1000.0

# ------------------------------------------------------------------------------
# MARKET VIABILITY GATE (Prevents copying into dead/resolved markets!)
# ------------------------------------------------------------------------------
# These settings prevent the worst-case scenario: copying a trade into a market
# where the outcome is already decided but not yet resolved.

# Maximum price to consider a market still viable (default: 0.95)
# If best bid >= this OR best ask <= (1 - this), market appears resolved
# Hard cap: Cannot exceed 0.95 (absolute limit enforced in code)
VIABILITY_PRICE_LIMIT = 0.95

# Minimum time before market end to allow new BUY orders (in minutes)
# Default: 60 (1 hour). Prevents entering positions too close to resolution.
# Hard cap: Cannot be less than 5 minutes (absolute limit enforced in code)
VIABILITY_MIN_TIME_BEFORE_END_MINUTES = 60

# Maximum bid/ask spread in basis points (default: 500 = 5%)
# Wide spreads indicate low liquidity or near-resolution state
# Hard cap: Cannot exceed 2000 bps (absolute limit enforced in code)
VIABILITY_MAX_SPREAD_BPS = 500

# Minimum orderbook depth in USD (default: 10)
# Markets with very thin liquidity are dangerous to trade
# Hard cap: Cannot be less than $0.50 (absolute limit enforced in code)
VIABILITY_MIN_DEPTH_USD = 10

# ------------------------------------------------------------------------------
# SLIPPAGE PROTECTION
# ------------------------------------------------------------------------------
# Maximum allowed slippage from trader's execution price in basis points
# Default: 500 = 5%. If current market price is >5% worse than trader's price,
# the trade is skipped to avoid overpaying due to latency.
# Hard cap: Cannot exceed 1000 bps (10%) (absolute limit enforced in code)
MAX_SLIPPAGE_BPS = 500

# ------------------------------------------------------------------------------
# EDGE AWARENESS FILTERS (Improve copy trade quality)
# ------------------------------------------------------------------------------
# These filters help avoid copying trades that are unlikely to be profitable.

# Minimum trade value in USD to copy (default: 5.0)
# Filters out noise trades that are too small to matter
# EDGE_MIN_POSITION_DELTA_USD = 5.0

# Require holding a position to copy sells (default: true)
# When enabled, sell trades are skipped unless you already hold the position
# This prevents opening short exposure when trader is just exiting
# EDGE_REQUIRE_POSITION_FOR_SELL = true

# Minimum percentage of trader's position for a sell to be copied (default: 5.0)
# Filters out small rebalancing trades
# EDGE_MIN_TRADE_PERCENT_OF_POSITION = 5.0

# ------------------------------------------------------------------------------
# ADAPTIVE STRATEGY PARAMETERS (Only used if COPY_STRATEGY = 'ADAPTIVE')
# ------------------------------------------------------------------------------
# Minimum percentage for large orders (default: 5.0)
ADAPTIVE_MIN_PERCENT = 5.0

# Maximum percentage for small orders (default: 20.0)
ADAPTIVE_MAX_PERCENT = 20.0

# Threshold in USD to trigger adaptation (default: 500.0)
# Orders above this use lower %, orders below use higher %
ADAPTIVE_THRESHOLD_USD = 500.0

# ==============================================================================
# TIERED MULTIPLIERS (NEW FEATURE!)
# ==============================================================================
# Apply different multipliers based on trader's position size
# Solves the problem of copying traders with varying position sizes:
# - Small trades get higher multipliers (don't miss opportunities)
# - Large trades get lower multipliers (prevent over-allocation)
#
# Format: "min-max:multiplier,min-max:multiplier,min+:multiplier"
# - Use "min-max" for bounded ranges
# - Use "min+" for infinite upper bound (must be last)
# - Ranges are in USD based on trader's order size
#
# Example for $2k account copying a $500k-$1M trader:
# TIERED_MULTIPLIERS = 1-10:2.0,10-100:1.0,100-500:0.2,500-1000:0.1,1000-5000:0.02,5000-10000:0.01,10000-50000:0.002,50000-100000:0.001,100000-500000:0.0005,500000+:0.0002
#
# What this does:
# - $5 trader order √ó 2.0x = $10 copy (capture small trades)
# - $50 trader order √ó 1.0x = $50 copy
# - $500 trader order √ó 0.1x = $50 copy
# - $10,000 trader order √ó 0.002x = $20 copy
# - $250,000 trader order √ó 0.0002x = $50 copy (manage large trades)
#
# Simpler example for $1k account:
# TIERED_MULTIPLIERS = 1-100:2.0,100-1000:0.5,1000-10000:0.1,10000+:0.01
#
# Leave unset to use single TRADE_MULTIPLIER or no multiplier (1.0x)

# ==============================================================================
# LEGACY CONFIGURATION (For backward compatibility)
# ==============================================================================
# These are kept for compatibility with old .env files
# If you don't set COPY_STRATEGY, the bot will use these:
# - COPY_PERCENTAGE: Percentage of trader's order size (default: 10.0)
# - TRADE_MULTIPLIER: Single multiplier applied to copy percentage (default: 1.0)
# ‚ö†Ô∏è  DEPRECATED: Please migrate to new COPY_STRATEGY system above!
# ‚ö†Ô∏è  NOTE: If TIERED_MULTIPLIERS is set, it overrides TRADE_MULTIPLIER
# COPY_PERCENTAGE = 10.0
# TRADE_MULTIPLIER = 1.0

# ------------------------------------------------------------------------------
# TRADE AGGREGATION SETTINGS (NEW!)
# ------------------------------------------------------------------------------
# Enable trade aggregation for small trades (default: false)
# - true = Combine multiple small trades from the same trader into one larger trade
# - false = Execute each trade individually (original behavior)
# üí° Useful when traders make many small trades that individually fall below
#    Polymarket's $1 minimum but together would be worth copying!
TRADE_AGGREGATION_ENABLED = false

# Time window to wait for more trades before executing (in seconds)
# Default: 300 (5 minutes)
# - 60 = 1 minute
# - 300 = 5 minutes (recommended)
# - 600 = 10 minutes
# ‚è±Ô∏è  Longer windows allow more trades to combine but delay execution
TRADE_AGGREGATION_WINDOW_SECONDS = 300

# Preview/Dry-Run Mode (default: false)
# - true = Monitor trades but DO NOT execute them (safe testing)
# - false = Execute trades normally (live trading)
# üîç Use preview mode to test the bot without risking funds!
PREVIEW_MODE = false

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------
# MongoDB connection string
# ‚ö†Ô∏è  Keep this private! Never share or commit to git!
MONGO_URI = 'mongodb+srv://username:password@cluster.mongodb.net/database'

# ------------------------------------------------------------------------------
# BLOCKCHAIN CONFIGURATION (Polygon Mainnet)
# ------------------------------------------------------------------------------
# Polygon RPC endpoint (you can use Infura, Alchemy, or QuickNode)
RPC_URL = 'https://polygon-mainnet.infura.io/v3/YOUR_INFURA_KEY'

# USDC Contract Address on Polygon (DO NOT CHANGE)
USDC_CONTRACT_ADDRESS = '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'

# ==============================================================================
# API SERVER CONFIGURATION (For Frontend Integration)
# ==============================================================================
# Enable API server for frontend connections
ENABLE_API = true

# API server port (default: 3001)
API_PORT = 3001

# API server host (default: localhost, use 0.0.0.0 for production)
API_HOST = localhost

# JWT secret for API authentication (CHANGE THIS IN PRODUCTION!)
JWT_SECRET = 'your-super-secret-jwt-key-change-in-production'

# API rate limiting
API_RATE_LIMIT_WINDOW_MS = 900000  # 15 minutes
API_RATE_LIMIT_MAX_REQUESTS = 100  # 100 requests per 15 minutes

# CORS origin for frontend (default: localhost:3000)
CORS_ORIGIN = 'http://localhost:3000'

# Enable API documentation (Swagger UI) - disable in production
ENABLE_API_DOCS = true

# ==============================================================================
# SECURITY NOTES:
# - Never commit .env file to git (it's in .gitignore)
# - Use a dedicated wallet with limited funds for the bot
# - Regularly monitor bot activity
# - Change MongoDB password if exposed
# - Use strong JWT_SECRET in production
# ==============================================================================
